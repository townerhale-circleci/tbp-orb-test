description: Deploys a commit to dev
docker:
  - image: cimg/base:current
parameters:
  app_version:
    type: string
    description: Version of the app to deploy
  repo:
    type: string
    description: Repository to deploy
  environment:
    type: string
    description: Environment to deploy to
    default: dev
steps:
  - add-github-commiter
  - run:
      name: export variables
      command: |
        echo 'export VERSION="<< parameters.app_version >>"' >> $BASH_ENV
        echo 'export REPO="<< parameters.repo >>"' >> $BASH_ENV
        echo 'export ENVIRONMENT="<< parameters.environment >>"' >> $BASH_ENV
  - run:
      name: deploy
      command: <<include(scripts/deploy.sh)>>
